{% extends "page.html" %}

{% block content %}
<h3>Online Homework Management System (OHMS)</h3>

{% if todo %}
<div class='alert alert-error'>
<strong>Attention!</strong> We want to encourage you to read over the 
comments your peers have taken the time to write for you, so we require 
that you <i>rate</i> your peer comments after each peer assessment period 
ends. The following ratings are incomplete:
<ul>
  {% for homework, number in todo.iteritems() %}
  <li>{{ number }} ratings in {{ homework }}</li>
  {% endfor %}
</ul>
To view the peer comments for a given response, open up the homework and 
click on the link in the "Comments" section above the corresponding 
question. Please complete these as soon as possible.
</div>
{% endif %}

<table class="table table-striped" id="homeworks">
  <thead>
    <th>Homework</th>
    <th>Start Date</th>
    <th>Due Date</th>
    <th>Peer Assessment</th>
  </thead>
  <tbody>

  {% for hw in homeworks %}

  <tr>
    <td>
      {% if hw.start_date==None or hw.start_date < current_time %}
        <a href="hw?id={{hw.id}}">{{hw.name}}</a>
      {% else %}
        <p class="muted">{{hw.name}}</p>
	{% if user.type=="admin" %}
	(<a href="hw?id={{hw.id}}">Preview</a>)
	{% endif %}
      {% endif %}
    </td>
    <td>
      {% if hw.start_date %}
        {{hw.start_date.strftime("%a, %b %d at %I:%M %p")}}
      {% endif %}
    </td>
    <td>
      {% if hw.due_date %}
        {{hw.due_date.strftime("%a, %b %d at %I:%M %p")}}
      {% endif %}
    </td>
    <td>
      {% if peer_grading[loop.index0]==1 %}
        <a href="grade?id={{hw.id}}">Peer Assessment</a>
      {% elif peer_grading[loop.index0]==0 %}
        You weren't assigned to peer assess this week.
      {% elif peer_grading[loop.index0]==-1 %}
	ERROR: please see course staff.
      {% endif %}
    </td>
  </tr>

  {% endfor %}

  </tbody>
</table>


<table class="table table-striped" id="grades">
  <thead>
    <th>Item</th>
    <th>Grade</th>
  </thead>
  <tbody>

  {% for grade in grades %}

  <tr>
    <td>{{ grade[0] }}</td>
    <td>{{ grade[1] }}</td>
  </tr>

  {% endfor %}

  </tbody>
</table>
{% endblock %}

